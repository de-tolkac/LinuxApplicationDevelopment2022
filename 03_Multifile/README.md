# Многофайловая сборка
В репозитории с Д/З сделать (вложенный) подкаталог `03_Multifile` и поместить туда код из [Пример написания и использования Makefile](https://uneex.ru/FrBrGeorge/MakefileExample).
**Доделать `Makefile` так, чтобы:**
1. Собирались ''две'' библиотеки: `liboutput_static.a` и `liboutput.so` из файлов `fun.o` и `const.o`
2. Собиралось ''три'' бинарника: `prog` (из `.o`-фйалов), `prog-a` (из `prog.o` и `liboutput_static.a`) и `prog-so` (из `prog.o` и `liboutput.so`)
3. Имелась цель `test:`, для достижения которой
    - каждый из трёх бинарников запускается 
        - без параметров (обратите внимание на перенаправление `stderr`), 
        - с одним каким-нибудь параметром
        - и с тремя параметрами (для каждого бинарника параметры одинаковые).
    - Затем ''выводы'' соответствующих запусков сравниваются (например, с помощью `cmp file1 file2`, который вернёт ненулевой статус ошибки, если файлы не одинаковы)
4. И чтобы все генераты (включая файлы с выводами из тестов) удалялись по `make clean`

### Заметки по поводу тестирования
Сравнение выводов на `stderr` запусков бинарников **с разными названиями** будет приводить к ошибке, ведь они будут содержать эти самые *разные* названия ¯\\\_(ツ)_/¯. Для решения этой проблемы достаточно во временных файлах заменить все вхождения названия бинарника на одно общее.
В двух разных целях были реализованы обе стратегии тестирования:
- `test-bruteforce`
    Сравнивает выводы без дополнительных модификаций и вмешательств.
- `test-smart`
    Сравнивает модифицированные файлы, в которых различные названия бинарников приведены к одному --  `prog`.

По умолчанию в цели `test` используется `test-smart`.